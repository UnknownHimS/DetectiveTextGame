<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Detective Text Adventure - With Music</title>
  <link rel="icon" type="image/jpg" sizes="16x16" href="https://i.pinimg.com/1200x/44/62/be/4462be16cf026dbcd97b0ff2e10bbce9.jpg">
  <style>
    body {
    background: #222;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    max-width: 700px;
    margin: 40px auto;
    padding: 20px;
    border-radius: 10px;
    background-color: #222;
    box-shadow: 0 0 15px #000;
    transition: background 1s ease;
    background-repeat: no-repeat;
    background-position: center center;
    background-size: cover;
    position: relative;
    /* Add smooth font scaling on smaller devices */
    font-size: 16px; 
  }
  
  /* Dialogue box */
  #dialogue {
    white-space: pre-line;
    min-height: 140px;
    margin-bottom: 20px;
    font-size: 1.1rem;
    line-height: 1.5;
    background-color: rgba(0, 0, 0, 0.5);
    padding: 15px;
    border-radius: 8px;
    box-shadow: inset 0 0 10px #000;
    /* Make sure text doesn't overflow */
    word-wrap: break-word;
  }
  
  /* Choice buttons */
  #choices button {
    margin: 5px 10px 5px 0;
    padding: 12px 18px;
    font-size: 1rem;
    cursor: pointer;
    border-radius: 5px;
    border: none;
    background-color: #444;
    color: #eee;
    transition: background-color 0.3s;
    min-width: 120px;
    /* Make buttons easier to tap on mobile */
    touch-action: manipulation;
    user-select: none;
  }
  
  #choices button:hover,
  #choices button:focus {
    background-color: #666;
    outline: none;
  }
  
  /* Music control button */
  #musicControl {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(0, 0, 0, 0.6);
    border: none;
    color: #eee;
    padding: 10px 15px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    user-select: none;
    z-index: 1000;
  }
/* Small devices: phones */
@media (max-width: 680px) {
  body {
    max-width: 100%;
    font-size: 1.2rem;
    line-height: 1.6;
    padding: 10px;
  }

  #dialogue {
    min-height: 140px;
    font-size: 1.1rem;
    padding: 16px;
    border-radius: 8px;
  }

  #choices button {
    font-size: 1rem;
    padding: 14px 16px;
    width: 100%;
    margin: 10px 0;
    display: block;
    border-radius: 6px;
  }

  #musicControl {
    position: absolute;
    top: 10px;
    right: 10px;
    padding: 10px 14px;
    font-size: 1rem;
    z-index: 1000;
  }
}




  </style>
</head>
<body>
  <button id="musicControl">ðŸ”ˆ Mute Music</button>
  <div id="dialogue"></div>
  <div id="choices"></div>
  <audio id="bgMusic" loop>
   <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-13.mp3" type="audio/mpeg" />
    Your browser does not support the audio element.
  </audio>

  <script>
    const musicControl = document.getElementById('musicControl');
    const bgMusic = document.getElementById('bgMusic');

    // Try to play music after user interaction (some browsers require this)
    function tryPlayMusic() {
      bgMusic.play().catch(() => {
        // Autoplay blocked
      });
    }

    musicControl.addEventListener('click', () => {
      if (bgMusic.paused) {
        bgMusic.play();
        musicControl.textContent = 'ðŸ”ˆ Mute Music';
      } else {
        bgMusic.pause();
        musicControl.textContent = 'ðŸ”‡ Play Music';
      }
    });

    // Start music on first user interaction to avoid autoplay block
    document.body.addEventListener('click', tryPlayMusic, { once: true });

    // Your existing game code below
    const gameState = {
      clues: [],
      currentScene: 'intro',
      accused: null,
      suspects: ['Mr. Green', 'Ms. Violet', 'Colonel Mustard', 'Mrs. Peacock'],
      interrogations: {
        'Mr. Green': false,
        'Ms. Violet': false,
        'Colonel Mustard': false,
        'Mrs. Peacock': false
      }
    };

    const scenes = {
            intro: {
      background: '#1e1e2f',
      dialogues: [
        "Creator: Please, if you're using a cellphone, kindly play in landscape mode.",
        "Creator: Also, click the conversation box to proceed. If it doesn't proceed, well... that's just the end of it.",
        "Creator: Hope you enjoy the game!",
        "Partner: Mr. Detective, wake up! Weâ€™ve got a hot one!",
        "Partner: A bodyâ€™s been found at the abandoned theatre downtown.",
        "Partner: No witnesses, no signs of forced entry, and the stage curtain is soaked in... ketchup? Wait, no. Thatâ€™s blood.",
        "Partner: Where should we start, boss?"
      ],
      choices: [
        { text: "Go to the theatre", nextScene: "theatreArrival" },
        { text: "Review initial report", nextScene: "caseReport" }
      ]
    },
    
    caseReport: {
      background: '#2d2d3d',
      dialogues: [
        "Partner: Victim's name is Vincent DeLune â€” famous playwright.",
        "Partner: Last seen alive yesterday during a rehearsal.",
        "Partner: 3 suspects confirmed on set yesterday:",
        "Partner: 1. Melody â€” the dramatic lead actress.",
        "Partner: 2. Brick â€” the angry stagehand with a grudge.",
        "Partner: 3. Oscar â€” the understudy who never got his chance.",
        "Partner: Ready to roll, or you wanna dig deeper?"
      ],
      choices: [
        { text: "Go to the theatre", nextScene: "theatreArrival" },
        { text: "Ask for suspect details", nextScene: "suspectDetails" }
      ]
    },
    
    suspectDetails: {
      background: '#2d2d3d',
      dialogues: [
        "Partner: Melody is a diva. She and Vincent were romantically linked but had a huge fight recently.",
        "Partner: Brick once got fired by Vincent for dropping a spotlight... on someoneâ€™s sandwich.",
        "Partner: Oscar? Total pushover. But last week he screamed 'One day Iâ€™ll be the star!' in the break room.",
        "Partner: That was after Vincent told him to go mop the floor.",
        "Partner: Shall we head to the scene, Mr. Detective?"
      ],
      choices: [
        { text: "Go to the theatre", nextScene: "theatreArrival" },
        { text: "Review case report again", nextScene: "caseReport" }
      ]
    },
    
    theatreArrival: {
      background: 'url("https://images.unsplash.com/photo-1543273844-cd1f3c2ea30b?auto=format&fit=crop&w=870&q=80")',
      dialogues: [
        "You arrive at the old Velvet Curtain Theatre. The door creaks open like itâ€™s in a horror movie.",
        "Partner: Oof. Smells like stale popcorn and crime.",
        "Partner: Where to first?"
      ],
      choices: [
        { text: "Inspect the stage", nextScene: "stageScene" },
        { text: "Check the dressing room", nextScene: "dressingRoom" },
        { text: "Talk to Enma (she's here!)", nextScene: "enmaEntry" },
        { text: "Interview Melody", nextScene: "melodyInterview" }
      ]
    },
    
    stageScene: {
      background: '#3c3c4f',
      dialogues: [
        "You step onto the stage. Red velvet curtains. Dim light.",
        "Partner: Look at this! A fake knife... wait. No. Thatâ€™s real.",
        "Partner: Clue added: Real Prop Knife.",
        "Partner: Wanna keep poking around or talk to someone?"
      ],
      choices: [
        { text: "Inspect backstage", nextScene: "backstage" },
        { text: "Talk to Enma", nextScene: "enmaEntry" }
      ]
    },
    
    enmaEntry: {
      background: 'url("https://images.unsplash.com/photo-1602297982902-e6b96cddce72?auto=format&fit=crop&w=870&q=80")',
      dialogues: [
        "You see Enma standing in the lobby, arms crossed, tapping her foot.",
        "Enma: Mr. Detective, finally. I thought Iâ€™d have to solve this without you.",
        "Partner: Oooooh... Someoneâ€™s in trouble~",
        "Enma: *glaring* Not now, sidekick.",
        "Mr. Detective: Enma, I didnâ€™t know you were assigned to this case.",
        "Enma: I wasnâ€™t. But when I heard *you* were on it, I had to make sure you didn't flirt your way into another trap.",
        "Partner: ...Was that a burn or a compliment?",
        "Enma: Both. Letâ€™s catch a killer, shall we?"
      ],
      choices: [
        { text: "Ask Enmaâ€™s opinion on suspects", nextScene: "enmaSuspects" },
        { text: "Ask Enma about her feelings (risky)", nextScene: "romanceTension1" }
      ]
    },
    
        enmaSuspects: {
          background: '#2e2e3f',
          dialogues: [
            "Enma: Melodyâ€™s too dramatic, but not smart enough to cover her tracks.",
            "Enma: Brick has motive, but heâ€™s predictable. Punch first, trip over evidence later.",
            "Enma: Oscar? Quiet ones are the scariest. He could snap.",
            "Partner: Sheâ€™s good... Can we keep her?",
            "Enma: I'm not a puppy. I'm his *partner-in-love*. Try again.",
            "Partner: ðŸ˜³"
          ],
          choices: [
            { text: "Go back to the stage", nextScene: "stageScene" },
            { text: "Talk to Melody", nextScene: "melodyInterview" }
          ]
        },
        
        romanceTension1: {
          background: '#2e2e3f',
          dialogues: [
            "Mr. Detective: Enma, why do you always show up when Iâ€™m on a case?",
            "Enma: Maybe I like danger... or maybe I like *you* in a trench coat.",
            "Partner: Guys, please. I'm right here. Lonely. Single.",
            "Enma: Letâ€™s solve the case first, lover boy. Then weâ€™ll talk... maybe over coffee?",
            "Mr. Detective: Youâ€™re on.",
            "Partner: I'm third-wheeling so hard right now."
          ],
          choices: [
            { text: "Get back to work â€” stage", nextScene: "stageScene" },
            { text: "Go investigate dressing room", nextScene: "dressingRoom" }
          ]
        },
    
          melodyInterview: {
      background: '#443355',
      dialogues: [
        "Melody: Oh, Mr. Detective... what a tragedy. I wept for a full five minutes.",
        "Partner: Thatâ€™s a record. You timed it?",
        "Melody: Vincent was a genius. Arrogant, rude, controlling... but a genius.",
        "Mr. Detective: Did you have any fights with him recently?",
        "Melody: Define 'fight'. We exchanged passionate screams. Itâ€™s called theatre, darling.",
        "Partner: *whispers* She's scary.",
        "Melody: I didnâ€™t kill him. I loved him... kind of. Sometimes. When he gave me the spotlight."
      ],
      choices: [
        { text: "Check dressing room", nextScene: "dressingRoom" },
        { text: "Talk to Oscar backstage", nextScene: "backstage2" }
      ]
    },
    
    dressingRoom: {
      background: 'url("https://images.unsplash.com/photo-1614852206111-4fa7c7c3f3d7?auto=format&fit=crop&w=870&q=80")',
      dialogues: [
        "You enter the dressing room. Mirrors cracked. Makeup everywhere.",
        "Partner: Check this out! A torn costume... looks like someone tried to hide blood.",
        "Partner: Clue added: Torn Costume with Blood Stain.",
        "Partner: The tag says... 'Oscar'.",
        "Partner: I always knew the quiet ones were weird.",
        "Enma (from the doorway): Thatâ€™s not enough to accuse him. We need more than laundry evidence."
      ],
      choices: [
        { text: "Talk to Oscar", nextScene: "backstage2" },
        { text: "Discuss with Enma", nextScene: "enmaEntry2" }
      ]
    },
    
    backstage2: {
      background: '#2c2c3b',
      dialogues: [
        "You find Oscar alone, rehearsing a monologue to a mop.",
        "Oscar: I didnâ€™t do it! I mean... I would never!",
        "Mr. Detective: You're jumpy. Nervous about something?",
        "Oscar: Vincent hated me. Said Iâ€™d never act again. But I didnâ€™t kill him!",
        "Partner: Youâ€™re holding a prop knife.",
        "Oscar: Itâ€™s a spoon.",
        "Partner: Ah. Well, I feel foolish now.",
        "Oscar: Check the storage room. Brick was in there yesterday yelling at a coat rack. Heâ€™s... unwell."
      ],
      choices: [
        { text: "Check storage room", nextScene: "storageRoom" },
        { text: "Talk to Enma", nextScene: "enmaEntry2" }
      ]
    },
    
    enmaEntry2: {
      background: 'url("https://images.unsplash.com/photo-1602297982902-e6b96cddce72?auto=format&fit=crop&w=870&q=80")',
      dialogues: [
        "Enma: Oscarâ€™s scared, not guilty. But fear can make people stupid.",
        "Mr. Detective: Youâ€™re good at reading people. Maybe too good.",
        "Enma: Jealousy doesn't suit you, Mr. Detective.",
        "Partner: He gets weird when you're around.",
        "Enma: Good. It keeps him charming.",
        "Mr. Detective: ...Iâ€™ll ignore that.",
        "Enma: Donâ€™t. I mean it."
      ],
      choices: [
        { text: "Go to storage room", nextScene: "storageRoom" },
        { text: "Dig into Enmaâ€™s suspicions", nextScene: "romanceTension2" }
      ]
    },
    
    romanceTension2: {
      background: '#32243f',
      dialogues: [
        "Mr. Detective: You always walk into my life at the weirdest times.",
        "Enma: Maybe I just like seeing you when you're focused. Itâ€™s... attractive.",
        "Partner: Iâ€™m just gonna start a dating app for you two. 'CrimeMatch'.",
        "Enma: You joke, but I do think weâ€™re a good team.",
        "Mr. Detective: We are. Even if we fight.",
        "Enma: Thatâ€™s what makes it exciting. Solving crimes and hearts.",
        "Partner: I think I just threw up in my mouth a little."
      ],
      choices: [
        { text: "Go to storage room", nextScene: "storageRoom" },
        { text: "Review all clues so far", nextScene: "reviewClues1" }
      ]
    },
    
    storageRoom: {
      background: '#2a2a35',
      dialogues: [
        "Storage room is dark. Dust everywhere. Smells like regret.",
        "Partner: Found something! A second prop knife... this one's clean.",
        "Partner: Wait... the victim's diary! Hidden behind paint cans.",
        "Partner: Clue added: Hidden Diary.",
        "Enma: Read it. Might be his final words.",
        "Mr. Detective: 'I think one of them wants me dead. I donâ€™t know who. Iâ€™ll fake a scene tomorrow to test them.'",
        "Partner: So... was this a trap that backfired?",
        "Enma: Or someone found out his plan and made sure he didn't finish the act."
      ],
      choices: [
        { text: "Form a theory", nextScene: "formTheory1" },
        { text: "Double-check suspects", nextScene: "caseReport2" }
      ]
    },
    
    reviewClues1: {
      background: '#1f1f2f',
      dialogues: [
        "You pause to think:",
        "- Real knife found on stage.",
        "- Torn costume with blood (Oscar).",
        "- Hidden diary (Vincent suspected someone).",
        "- Melody had a fight with him.",
        "- Brick was raging in storage room.",
        "- Oscar says he was mocked.",
        "Partner: So... whoâ€™s the killer?",
        "Enma: Donâ€™t guess. Prove it."
      ],
      choices: [
        { text: "Form a theory", nextScene: "formTheory1" },
        { text: "Confront Brick directly", nextScene: "brickConfrontation" }
      ]
    },
    
    caseReport2: {
      background: '#2d2d3d',
      dialogues: [
        "Partner: Need a recap?",
        "- Melody = Drama & motive (jealousy).",
        "- Brick = Anger issues + seen in storage.",
        "- Oscar = Weird but maybe innocent.",
        "Partner: My gut says itâ€™s... actually, no. I had bad tacos. Ignore me.",
        "Enma: Trust facts, not feelings. Especially not his.",
      ],
      choices: [
        { text: "Form a theory", nextScene: "formTheory1" },
        { text: "Talk to Brick", nextScene: "brickConfrontation" }
      ]
    },
    
    formTheory1: {
      background: '#2a2a2a',
      dialogues: [
        "Mr. Detective: Letâ€™s put this together.",
        "Partner: I got popcorn. Go!",
        "Enma: Focus.",
        "Mr. Detective: Vincent planned a fake murder scene to scare a suspect.",
        "Mr. Detective: But someone found out... and used it as the real deal.",
        "Mr. Detective: The torn costume was staged to frame Oscar.",
        "Mr. Detective: But the real knife... came from backstage.",
        "Enma: And only one person had access to all of it..."
      ],
      choices: [
        { text: "Accuse Melody", nextScene: "accuseMelody" },
        { text: "Accuse Brick", nextScene: "accuseBrick" },
        { text: "Accuse Oscar", nextScene: "accuseOscar" }
      ]
    },

    }

    const dialogueElem = document.getElementById('dialogue');
    const choicesElem = document.getElementById('choices');

    let dialogueIndex = 0;

    function setBackground(bg) {
      if (bg.startsWith('url(')) {
        document.body.style.backgroundImage = bg;
        document.body.style.backgroundColor = '';
      } else {
        document.body.style.backgroundImage = '';
        document.body.style.backgroundColor = bg;
      }
    }

    function addClue(clue) {
      if (clue && !gameState.clues.includes(clue)) {
        gameState.clues.push(clue);
      }
    }

    function showScene(sceneKey) {
      const scene = scenes[sceneKey];
      if (!scene) return;

      gameState.currentScene = sceneKey;
      dialogueIndex = 0;
      setBackground(scene.background);

      if (scene.clue) {
        addClue(scene.clue);
      }

      renderDialogue(scene);
      renderChoices(scene);
    }

    function renderDialogue(scene) {
      if (dialogueIndex < scene.dialogues.length) {
        dialogueElem.textContent = scene.dialogues[dialogueIndex];
      } else {
        dialogueElem.textContent = "";
      }
    }

    function renderChoices(scene) {
      choicesElem.innerHTML = "";
      scene.choices.forEach(choice => {
        const btn = document.createElement('button');
        btn.textContent = choice.text;
        btn.onclick = () => {
          if (choice.nextScene === 'accuseResult') {
            gameState.accused = choice.suspect;
            showAccuseResult(choice.suspect);
          } else {
            showScene(choice.nextScene);
          }
        };
        choicesElem.appendChild(btn);
      });
    }

    function showAccuseResult(suspect) {
      dialogueIndex = 0;
      const resultElem = dialogueElem;
      const choicesElemLocal = choicesElem;
      setBackground('#111');

      // Determine if accusation is correct (let's say Colonel Mustard is culprit for example)
      const culprit = 'Colonel Mustard';

      if (suspect === culprit) {
        resultElem.textContent = `You accused ${suspect}. Congratulations! You solved the case! It was indeed ${culprit}.`;
      } else {
        resultElem.textContent = `You accused ${suspect}. Unfortunately, that is incorrect. The real culprit was ${culprit}.`;
      }

      choicesElemLocal.innerHTML = '';

      const restartBtn = document.createElement('button');
      restartBtn.textContent = 'Play Again';
      restartBtn.onclick = () => {
        gameState.clues = [];
        gameState.accused = null;
        showScene('comedyIntro');
      };
      choicesElemLocal.appendChild(restartBtn);
    }

    // Add clicking to advance dialogue in scenes with multiple dialogues
    dialogueElem.addEventListener('click', () => {
      const scene = scenes[gameState.currentScene];
      if (!scene) return;

      if (dialogueIndex < scene.dialogues.length - 1) {
        dialogueIndex++;
        renderDialogue(scene);
      }
    });

    // Start game
    showScene('intro');
  </script>
</body>
</html>
